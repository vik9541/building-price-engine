# ðŸ“Š Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð¦ÐµÐ½

## ðŸŽ¯ ÐžÐ±Ð·Ð¾Ñ€

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° **Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÑ‚ Ñ†ÐµÐ½Ñ‹** ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð¾Ð² Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ñ€Ñ‹Ð½Ð¾Ðº Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ð² ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ðµ:

âœ… **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ 24/7** - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ñ†ÐµÐ½Ñ‹ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð¼Ð¸Ð½ÑƒÑ‚  
âœ… **ÐÐ½Ð°Ð»Ð¸Ð· Yandex Market** - ÑÑ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÑ‚ Ñ Ð¼Ð°Ñ€ÐºÐµÑ‚Ð¾Ð¼  
âœ… **ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð°Ð½Ð¾Ð¼Ð°Ð»Ð¸Ð¹** - Ð»Ð¾Ð²Ð¸Ñ‚ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ†ÐµÐ½Ñ‹  
âœ… **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿ÐµÑ€ÐµÑ†ÐµÐ½Ð¸Ð²Ð°Ð½Ð¸Ðµ** - Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ð²Ð°ÑˆÑƒ Ñ†ÐµÐ½Ñƒ  
âœ… **ÐžÐ¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ** - ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÑÐµÑ‚ Ð¾ Ñ€ÐµÐ·ÐºÐ¸Ñ… Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸ÑÑ… Ñ†ÐµÐ½  

## ðŸ”„ ÐŸÑ€Ð¾Ñ†ÐµÑÑ ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°

### Ð¨Ð°Ð³ 1: Ð¡Ð±Ð¾Ñ€ Ð”Ð°Ð½Ð½Ñ‹Ñ… Ð¾ Ð¦ÐµÐ½Ð°Ñ… (ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ)

```
ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡, Leroy Merlin, Obi
        â†“
   ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²
        â†“
Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ Ñ†ÐµÐ½, SKU, Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ð¹
        â†“
Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð² CompetitorPrice
        â†“
Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ PriceSnapshot (Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ)
```

### Ð¨Ð°Ð³ 2: ÐÐ½Ð°Ð»Ð¸Ð· Ð Ñ‹Ð½ÐºÐ° (ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð¼Ð¸Ð½ÑƒÑ‚)

Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð°:

```python
1. Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ†ÐµÐ½Ñ‹ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð¾Ð²
2. Ð’Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ:
   - min_price (Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼)
   - max_price (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼)
   - avg_price (ÑÑ€ÐµÐ´Ð½ÐµÐµ)
   - median (Ð¼ÐµÐ´Ð¸Ð°Ð½Ð°)
   - std_dev (ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ðµ)

3. ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ Ð½Ð°ÑˆÑƒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ:
   - "cheapest" - ÑÐ°Ð¼Ñ‹Ðµ Ð´ÐµÑˆÑ‘Ð²Ñ‹Ðµ
   - "most_expensive" - ÑÐ°Ð¼Ñ‹Ðµ Ð´Ð¾Ñ€Ð¾Ð³Ð¸Ðµ
   - "below_median" - Ð½Ð¸Ð¶Ðµ Ð¼ÐµÐ´Ð¸Ð°Ð½Ñ‹
   - "above_median" - Ð²Ñ‹ÑˆÐµ Ð¼ÐµÐ´Ð¸Ð°Ð½Ñ‹
   - "median" - Ð² Ð¼ÐµÐ´Ð¸Ð°Ð½Ðµ

4. Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ Ñ Yandex Market
5. Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ñ‚Ñ€ÐµÐ½Ð´Ñ‹ (24h, 7d, 30d)
6. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð² MarketAnalysis
```

### Ð¨Ð°Ð³ 3: ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹

```python
Ð•ÑÐ»Ð¸ Ñ†ÐµÐ½Ð° ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð° Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð°ÑÑŒ > 10%:
  â”œâ”€ price_drop   (ÑÐ½Ð¸Ð¶ÐµÐ½Ð¸Ðµ)
  â”œâ”€ price_spike  (Ð²ÑÐ¿Ð»ÐµÑÐº)
  â””â”€ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ PriceAlert

Ð•ÑÐ»Ð¸ Ð² Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ ÐµÑÑ‚ÑŒ ÑÐºÐ°Ñ‡Ð¾Ðº:
  â””â”€ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ alert: stock_change
```

### Ð¨Ð°Ð³ 4: ÐŸÐµÑ€ÐµÑ†ÐµÐ½Ð¸Ð²Ð°Ð½Ð¸Ðµ

```python
Ð•ÑÐ»Ð¸ recommended_price Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ our_price > 5 Ñ€ÑƒÐ± Ð¸Ð»Ð¸ > 2%:
  â”œâ”€ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ recommended_price
  â”œâ”€ Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ
  â””â”€ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð² PriceHistory
```

## ðŸ“ˆ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð”Ð°Ð½Ð½Ñ‹Ñ…

### PriceSnapshot (Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ½Ð¸Ð¼ÐºÐ¸)

```python
{
  product_id: 1,
  price_source_id: 1,  # ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡
  price: 125.50,
  in_stock: True,
  market_position: "below_median",
  deviation_from_avg: -5.2,  # ÐÐ° 5.2% Ð½Ð¸Ð¶Ðµ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾
  snapshot_date: "2026-01-11T10:30:00"
}
```

### MarketAnalysis (Ð°Ð½Ð°Ð»Ð¸Ð· Ñ€Ñ‹Ð½ÐºÐ°)

```python
{
  product_id: 1,
  active_sellers_count: 15,  # ÐšÐ¾Ð»-Ð²Ð¾ Ð¿Ñ€Ð¾Ð´Ð°Ð²Ñ†Ð¾Ð²
  
  price_min: 110.0,
  price_max: 150.0,
  price_avg: 125.5,
  price_median: 123.0,
  price_std_dev: 12.5,
  
  our_position: "below_median",
  our_price_percentile: 35.0,  # ÐÐ¸Ð¶Ðµ 35% Ð¿Ñ€Ð¾Ð´Ð°Ð²Ñ†Ð¾Ð²
  
  yandex_market_price: 122.0,
  yandex_market_deviation: 1.5,  # ÐÐ° 1.5% Ð²Ñ‹ÑˆÐµ Ð¯Ð½Ð´ÐµÐºÑÐ°
  
  price_trend: "up",
  price_trend_24h: 2.3,   # +2.3% Ð·Ð° ÑÑƒÑ‚ÐºÐ¸
  price_trend_7d: -1.5,   # -1.5% Ð·Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ
  price_trend_30d: 5.0,   # +5% Ð·Ð° Ð¼ÐµÑÑÑ†
  
  analysis_date: "2026-01-11T10:45:00"
}
```

### CompetitorPriceRanking (Ð½Ð°ÑˆÐµ Ð¼ÐµÑÑ‚Ð¾ Ð² Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ðµ)

```python
{
  product_id: 1,
  total_competitors: 15,
  our_rank: 6,  # ÐœÑ‹ Ð½Ð° 6-Ð¼ Ð¼ÐµÑÑ‚Ðµ (6-Ð¹ Ð´ÐµÑˆÑ‘Ð²Ñ‹Ð¹)
  
  price_above_cheapest: 15.0,    # ÐÐ° 15Ñ€ Ð´Ð¾Ñ€Ð¾Ð¶Ðµ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð´ÐµÑˆÑ‘Ð²Ð¾Ð³Ð¾
  price_below_expensive: 25.0,   # ÐÐ° 25Ñ€ Ð´ÐµÑˆÐµÐ²Ð»Ðµ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð´Ð¾Ñ€Ð¾Ð³Ð¾Ð³Ð¾
  
  recommended_price: 120.5,
  recommendation_reason: "Undercut competitors by 2% for more sales"
}
```

### PriceAlert (Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ)

```python
{
  product_id: 1,
  price_source_id: 1,  # ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡
  alert_type: "price_drop",  # Ð¸Ð»Ð¸ price_spike
  
  old_price: 130.0,
  new_price: 115.0,
  change_percent: -11.5,  # ÐÐ° 11.5% ÑƒÐ¿Ð°Ð»Ð°
  
  message: "Price decreased by 11.5% from 130.0 to 115.0",
  is_acknowledged: False,
  
  created_at: "2026-01-11T11:00:00"
}
```

## ðŸš€ API Endpoints

### ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð°Ð½Ð°Ð»Ð¸Ð· Ñ€Ñ‹Ð½ÐºÐ°

```bash
GET /api/monitoring/market-analysis/{product_id}
```

**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "product_id": 1,
  "market_data": {
    "min_price": 110.0,
    "max_price": 150.0,
    "avg_price": 125.5,
    "our_position": "below_median",
    "sellers_count": 15
  },
  "trends": {
    "24h": 2.3,
    "7d": -1.5,
    "30d": 5.0
  }
}
```

### ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³ Ñ†ÐµÐ½Ñ‹

```bash
GET /api/monitoring/price-ranking/{product_id}
```

**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "product_id": 1,
  "our_rank": 6,
  "total_competitors": 15,
  "recommended_price": 120.5,
  "recommendation_reason": "Undercut competitors by 2%",
  "price_comparison": {
    "above_cheapest": 15.0,
    "below_expensive": 25.0
  }
}
```

### Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹

```bash
GET /api/monitoring/price-alerts/?acknowledged=false&limit=50
```

### ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ðµ

```bash
POST /api/monitoring/price-alerts/{alert_id}/acknowledge
```

## â° Ð Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð—Ð°Ð´Ð°Ñ‡ (Celery Beat)

### ÐšÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð¼Ð¸Ð½ÑƒÑ‚
```
monitor-all-prices
  â†“
Ð”Ð»Ñ Ð²ÑÐµÑ… Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²:
  â”œâ”€ ÐÐ½Ð°Ð»Ð¸Ð· Ñ€Ñ‹Ð½ÐºÐ°
  â”œâ”€ ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
  â”œâ”€ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹
  â””â”€ ÐŸÐµÑ€ÐµÑ†ÐµÐ½Ð¸Ð²Ð°Ð½Ð¸Ðµ
```

### ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ
```
parse-competitors
  â”œâ”€ ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡
  â”œâ”€ Leroy Merlin
  â””â”€ Obi

monitor-sources-round
  â”œâ”€ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²ÑÐµÑ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²
  â””â”€ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ½Ð¸Ð¼ÐºÐ¾Ð² Ñ†ÐµÐ½

update-prices
  â”œâ”€ ÐŸÐµÑ€ÐµÑÑ‡Ñ‘Ñ‚ Ð²ÑÐµÑ… Ñ†ÐµÐ½
  â””â”€ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°
```

### Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾ Ð² 3 AM
```
cleanup-old-alerts
  â””â”€ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ€ÑˆÐµ 30 Ð´Ð½ÐµÐ¹

cleanup-old-snapshots
  â””â”€ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐ½Ð¸Ð¼ÐºÐ¸ ÑÑ‚Ð°Ñ€ÑˆÐµ 90 Ð´Ð½ÐµÐ¹
```

## ðŸŽ¯ Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð”Ð°Ð½Ð½Ñ‹Ñ…

### ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð¼Ð°Ñ€ÐºÐµÑ‚Ð¿Ð»ÐµÐ¹ÑÑ‹

| ÐœÐ°Ñ€ÐºÐµÑ‚Ð¿Ð»ÐµÐ¹Ñ | Ð¢Ð¸Ð¿ | Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ |
|-------------|------|----------|--------|
| **ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡** | ÐšÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚ | 60 Ð¼Ð¸Ð½ | âœ… Ð“Ð¾Ñ‚Ð¾Ð² |
| **Leroy Merlin** | ÐšÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚ | 60 Ð¼Ð¸Ð½ | âœ… Ð“Ð¾Ñ‚Ð¾Ð² |
| **Obi** | ÐšÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚ | 60 Ð¼Ð¸Ð½ | âœ… Ð“Ð¾Ñ‚Ð¾Ð² |
| **Yandex Market** | Ð‘ÐµÐ½Ñ‡Ð¼Ð°Ñ€Ðº | 120 Ð¼Ð¸Ð½ | ðŸ”„ Ð’ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ |
| **Avangard** | ÐšÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚ | 120 Ð¼Ð¸Ð½ | ðŸ”„ Ð’ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ |
| **E-Catalog** | Ð‘ÐµÐ½Ñ‡Ð¼Ð°Ñ€Ðº | 120 Ð¼Ð¸Ð½ | ðŸ”„ Ð’ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ |

## ðŸ“Š ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÐÐ½Ð°Ð»Ð¸Ð·Ð° Ð´Ð»Ñ ÐžÐ´Ð½Ð¾Ð³Ð¾ Ð¢Ð¾Ð²Ð°Ñ€Ð°

### Ð˜ÑÑ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
```
ÐÐ°Ñˆ Ñ‚Ð¾Ð²Ð°Ñ€: ÐšÐ¸Ñ€Ð¿Ð¸Ñ‡ Ð¾Ð±Ð»Ð¸Ñ†Ð¾Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹
ÐÐ°ÑˆÐ° Ñ†ÐµÐ½Ð°: 25.00Ñ€
Ð¡ÐµÐ±ÐµÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ: 15.00Ñ€
ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð¼Ð°Ñ€Ð¶Ð°: 50Ñ€ (Ð¿Ð¾ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸)
```

### Ð¡Ð¾Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ Ñ†ÐµÐ½Ñ‹ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð¾Ð²
```
ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡: 24.50Ñ€
Leroy: 26.00Ñ€
Obi: 23.50Ñ€ (ÐŸÐžÐ”ÐžÐ—Ð Ð˜Ð¢Ð•Ð›Ð¬ÐÐž ÐÐ˜Ð—ÐšÐž!)
ÐÐ²Ð°Ð½Ð³Ð°Ñ€Ð´: 25.50Ñ€
Ð•-ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³: 25.00Ñ€
```

### ÐÐ½Ð°Ð»Ð¸Ð·
```python
valid_prices = [24.50, 26.00, 25.50, 25.00]  # Obi Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½ (ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð½Ð¸Ð·ÐºÐ¾)

min_price = 24.50
max_price = 26.00
avg_price = 25.25
median = 25.25

our_rank = 2  # Ð’Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¿Ð¾ Ñ†ÐµÐ½Ðµ (Ð´ÐµÑˆÐµÐ²Ð»Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° 24.50)
our_deviation = -0.99%  # ÐÐ° 0.99% Ð´ÐµÑˆÐµÐ²Ð»Ðµ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾

recommended_price = 24.90  # ÐÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð½Ð¸Ð¶Ðµ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾
```

### ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð°Ð½Ð¾Ð¼Ð°Ð»Ð¸Ð¸
```
âš ï¸  "price_outlier" - Obi ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð´ÐµÑˆÑ‘Ð²Ñ‹Ð¹ (Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð² Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ðµ)
âš ï¸  "yandex_market_deviation" - Ð•ÑÐ»Ð¸ Ð¯Ð½Ð´ÐµÐºÑ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ 30Ñ€
```

### Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
```
1. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ alert Ð¾ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ñ†ÐµÐ½Ðµ Obi
2. Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ñ‚ÑŒ Ñ†ÐµÐ½Ñƒ 24.90Ñ€
3. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½ Obi (Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð´ÐµÑˆÐµÐ²Ð»Ðµ)
4. ÐŸÑ€Ð¸ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ð¸ - ÑÐ½Ð¸Ð·Ð¸Ñ‚ÑŒ Ð½Ð°ÑˆÑƒ Ñ†ÐµÐ½Ñƒ Ð½Ð° 24.90Ñ€
5. Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð² price_history
```

## ðŸ” Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð”Ð°Ð½Ð½Ñ‹Ñ…

### Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð°Ð½Ð¾Ð¼Ð°Ð»Ð¸Ð¹

```python
Ð¦ÐµÐ½Ð° Ð˜Ð¡ÐšÐ›Ð®Ð§ÐÐ•Ð¢Ð¡Ð¯ ÐµÑÐ»Ð¸:
  â”œâ”€ ÐžÑ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾ > 3 ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ñ… Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ
  â”œâ”€ ÐÑƒÐ»ÐµÐ²Ð°Ñ Ð¸Ð»Ð¸ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ
  â”œâ”€ ÐÐ°Ð¼Ð½Ð¾Ð³Ð¾ Ð²Ñ‹ÑˆÐµ Yandex Market (>50%)
  â””â”€ Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº Ð¸Ð¼ÐµÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑ unreliable

Ð¦ÐµÐ½Ð° ÐŸÐžÐœÐ•Ð§ÐÐ•Ð¢Ð¡Ð¯ ÐŸÐžÐ”ÐžÐ—Ð Ð•ÐÐ˜Ð•Ðœ ÐµÑÐ»Ð¸:
  â”œâ”€ ÐžÑ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾ > 1.5 ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ñ… Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ
  â”œâ”€ ÐÐ° 10%+ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ Yandex Market
  â””â”€ Ð ÐµÐ·ÐºÐ¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð°ÑÑŒ (>10% Ð·Ð° 1 Ñ‡Ð°Ñ)
```

## ðŸ“ˆ ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°

### Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð°
```json
{
  "sku": "KIR001",
  "monitoring_stats": {
    "last_check": "2026-01-11T11:00:00",
    "sources_checked": 5,
    "sources_found": 5,
    "prices_valid": 4,
    "prices_anomalies": 1,
    "price_stability": "95%"
  }
}
```

### Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°
```json
{
  "source_id": 1,
  "name": "ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð¸Ñ‡",
  "stats": {
    "total_products_tracked": 1500,
    "price_updates_today": 1450,
    "update_success_rate": "96.7%",
    "average_parse_time": "45s",
    "last_update": "2026-01-11T11:00:00"
  }
}
```

## ðŸ› ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°

Ð’ `backend/.env`:

```env
# Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ñ‹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
PRICE_CHECK_INTERVAL=30        # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ†ÐµÐ½ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð¼Ð¸Ð½ÑƒÑ‚
PARSE_INTERVAL=60              # ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ
PRICE_CALCULATE_INTERVAL=60    # ÐŸÐµÑ€ÐµÑ†ÐµÐ½Ð¸Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ

# ÐŸÐ¾Ñ€Ð¾Ð³Ð¸ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹
PRICE_ALERT_THRESHOLD=10       # Alert ÐµÑÐ»Ð¸ > 10% Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ
YANDEX_DEVIATION_THRESHOLD=20  # Alert ÐµÑÐ»Ð¸ > 20% Ð¾Ñ‚ Ð¯Ð½Ð´ÐµÐºÑÐ°

# Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸
OUTLIER_STD_DEV=3              # Ð˜ÑÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ > 3 ÑÐ¸Ð³Ð¼Ð°
SUSPICIOUS_STD_DEV=1.5         # ÐŸÐ¾Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ > 1.5 ÑÐ¸Ð³Ð¼Ð°
```

## ðŸ› Troubleshooting

### ÐŸÐ°Ñ€ÑÐµÑ€ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs -f backend | grep "parse"

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
docker-compose exec backend python
python> from app.parsers.petrov_parser import PetrovParser
python> parser = PetrovParser()
python> products = parser.parse_products()
```

### Ð¦ÐµÐ½Ñ‹ Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑŽÑ‚ÑÑ
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Celery
docker-compose logs -f celery

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Redis
docker-compose exec redis redis-cli
redis> KEYS *  # Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ð¸
```

### ÐÐµÑ‚ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ PriceAlert Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ
SELECT * FROM price_alerts ORDER BY created_at DESC LIMIT 10;

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ market_analysis
SELECT * FROM market_analysis WHERE product_id = 1;
```

## ðŸ“ Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

```
logs/
â”œâ”€â”€ monitor_2026-01-11.log      # ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³
â”œâ”€â”€ parser_2026-01-11.log       # ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð¾Ð²
â”œâ”€â”€ alerts_2026-01-11.log       # ÐžÐ¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ
â””â”€â”€ errors_2026-01-11.log       # ÐžÑˆÐ¸Ð±ÐºÐ¸
```

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð»Ð¾Ð³Ð°:
```
2026-01-11 11:00:00 INFO Starting comprehensive price monitoring
2026-01-11 11:00:05 INFO Market analysis completed for KIR001: avg=125.5, our_pos=below_median
2026-01-11 11:00:10 WARNING Price alert for KIR001: price_drop from 130.0 to 115.0 (-11.5%)
2026-01-11 11:00:15 INFO Updated price for PAR001: 50.0 -> 48.5 (reason: undercut competitors)
2026-01-11 11:02:00 INFO Price monitoring completed: {'total_products': 1500, 'products_analyzed': 1500, 'prices_updated': 45, 'alerts_created': 12}
```
